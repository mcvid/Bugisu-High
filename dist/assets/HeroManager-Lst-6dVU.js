var G=r=>{throw TypeError(r)};var P=(r,t,s)=>t.has(r)||G("Cannot "+s);var o=(r,t,s)=>(P(r,t,"read from private field"),s?s.call(r):t.get(r)),R=(r,t,s)=>t.has(r)?G("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),A=(r,t,s,l)=>(P(r,t,"write to private field"),l?l.call(r,s):t.set(r,s),s),v=(r,t,s)=>(P(r,t,"access private method"),s);import{c as q,J as Q,Q as X,a7 as F,a8 as Z,a3 as k,a5 as Y,r as U,W as ee,a4 as te,j as i}from"./index-EH-KDdP-.js";import{e as ie}from"./useQueries-CzAEryra.js";import{T as se}from"./trash-2-DWd29h3p.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=q("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);var E,T,p,f,x,L,w,V,le=(V=class extends Q{constructor(t,s){super();R(this,x);R(this,E);R(this,T);R(this,p);R(this,f);A(this,E,t),this.setOptions(s),this.bindMethods(),v(this,x,L).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var l;const s=this.options;this.options=o(this,E).defaultMutationOptions(t),X(this.options,s)||o(this,E).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,p),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&F(s.mutationKey)!==F(this.options.mutationKey)?this.reset():((l=o(this,p))==null?void 0:l.state.status)==="pending"&&o(this,p).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,p))==null||t.removeObserver(this)}onMutationUpdate(t){v(this,x,L).call(this),v(this,x,w).call(this,t)}getCurrentResult(){return o(this,T)}reset(){var t;(t=o(this,p))==null||t.removeObserver(this),A(this,p,void 0),v(this,x,L).call(this),v(this,x,w).call(this)}mutate(t,s){var l;return A(this,f,s),(l=o(this,p))==null||l.removeObserver(this),A(this,p,o(this,E).getMutationCache().build(o(this,E),this.options)),o(this,p).addObserver(this),o(this,p).execute(t)}},E=new WeakMap,T=new WeakMap,p=new WeakMap,f=new WeakMap,x=new WeakSet,L=function(){var s;const t=((s=o(this,p))==null?void 0:s.state)??Z();A(this,T,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},w=function(t){k.batch(()=>{var s,l,a,O,c,g,h,C;if(o(this,f)&&this.hasListeners()){const d=o(this,T).variables,y=o(this,T).context,b={client:o(this,E),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(l=(s=o(this,f)).onSuccess)==null||l.call(s,t.data,d,y,b)}catch(m){Promise.reject(m)}try{(O=(a=o(this,f)).onSettled)==null||O.call(a,t.data,null,d,y,b)}catch(m){Promise.reject(m)}}else if((t==null?void 0:t.type)==="error"){try{(g=(c=o(this,f)).onError)==null||g.call(c,t.error,d,y,b)}catch(m){Promise.reject(m)}try{(C=(h=o(this,f)).onSettled)==null||C.call(h,void 0,t.error,d,y,b)}catch(m){Promise.reject(m)}}}this.listeners.forEach(d=>{d(o(this,T))})})},V);function W(r,t){const s=Y(),[l]=U.useState(()=>new le(s,r));U.useEffect(()=>{l.setOptions(r)},[l,r]);const a=U.useSyncExternalStore(U.useCallback(c=>l.subscribe(k.batchCalls(c)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),O=U.useCallback((c,g)=>{l.mutate(c,g).catch(ee)},[l]);if(a.error&&te(l.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:O,mutateAsync:a.mutate}}const he=()=>{var B;const r=[{label:"Home Page",path:"/"},{label:"Admissions",path:"/admissions"},{label:"Academics",path:"/academics"},{label:"About School",path:"/about"},{label:"Contact Us",path:"/contact"},{label:"Vacancies",path:"/vacancies"}],t={"/":[{title:"BUGISU HIGH SCHOOL",subtitle:"Experience Excellence in Education"},{title:"JOIN OUR COMMUNITY",subtitle:"Nurturing the Leaders of Tomorrow"},{title:"FUTURE LEADERS",subtitle:"Shaping Minds, Changing Lives"},{title:"STAY CONNECTED",subtitle:"Building a Legacy of Knowledge"},{title:"EXCELLENCE ALWAYS",subtitle:"Your Gateway to a Brighter Future"},{title:"INSPIRING MINDS",subtitle:"Fostering Innovation and Creativity"},{title:"VIBRANT COMMUNITY",subtitle:"Where Every Student Succeeds"},{title:"DISCOVER POTENTIAL",subtitle:"Empowering Excellence Since 1990"},{title:"WE ARE BUGISU",subtitle:"A Place of Tradition and Progress"},{title:"START YOUR JOURNEY",subtitle:"The First Step to Greatness"}],"/admissions":[{title:"ADMISSIONS 2026",subtitle:"Start Your Journey with Us Today"},{title:"JOIN THE PRIDE",subtitle:"Become Part of our Excellence"},{title:"ENROLL NOW",subtitle:"Secure Your Future with Quality Education"},{title:"APPLY TODAY",subtitle:"Your Path to Success Starts Here"},{title:"WELCOME STUDENTS",subtitle:"Join Mbale's Leading High School"},{title:"FUTURE SCHOLARS",subtitle:"Admissions Now Open for Next Term"},{title:"CHOOSE EXCELLENCE",subtitle:"Why Bugisu is the Right Choice"},{title:"JOIN OUR LEGACY",subtitle:"Nurturing Talent and Character"},{title:"ADMISSIONS OPEN",subtitle:"Step Into a World of Opportunities"},{title:"READY TO LEARN?",subtitle:"Join Our Dynamic Learning Environment"}],"/academics":[{title:"ACADEMIC EXCELLENCE",subtitle:"A Tradition of High Standards & Innovation"},{title:"HOLISTIC LEARNING",subtitle:"Beyond the Classroom Boundaries"},{title:"SMART CURRICULUM",subtitle:"Empowering Students for Global Success"},{title:"LEARN TO LEAD",subtitle:"Developing Critical Thinking Skills"},{title:"STEM FOCUS",subtitle:"Inspiring Future Scientists and Engineers"},{title:"ARTS & HUMANITIES",subtitle:"Fostering Creativity and Expression"},{title:"BEYOND THE BOOKS",subtitle:"Practical Skills for Real-World Success"},{title:"EXPERT TEACHERS",subtitle:"Expert Guidance for Every Student"},{title:"ACADEMIC GROWTH",subtitle:"Scholarly Pursuits and Achievement"},{title:"INNOVATION HUB",subtitle:"Cutting-Edge Education for Modern Minds"}],"/about":[{title:"OUR STORY & VISION",subtitle:"Building a Legacy of Knowledge Since 1990"},{title:"PRINCIPAL'S MESSAGE",subtitle:"Leading with Integrity and Passion"},{title:"OUR CORE VALUES",subtitle:"Excellence, Integrity, and Service"},{title:"HERITAGE & TRADITION",subtitle:"A Glimpse into Our Rich History"},{title:"OUR MISSION",subtitle:"Nurturing Holistic and Responsible Citizens"},{title:"SCHOOL GOVERNANCE",subtitle:"Strategic Leadership and Vision"},{title:"OUR ETHOS",subtitle:"Inspiring a Lifetime of Learning"},{title:"OUR IMPACT",subtitle:"Alumni Success Stories that Inspire"},{title:"PROUD HISTORY",subtitle:"Decades of Educational Excellence"},{title:"THE BUGISU WAY",subtitle:"Character Building and Discipline"}],"/contact":[{title:"GET IN TOUCH",subtitle:"We are Here to Help with Your Inquiries"},{title:"VISIT OUR CAMPUS",subtitle:"Experience our Vibrant Community Firsthand"},{title:"REACH OUT",subtitle:"Your Future Starts with a Conversation"},{title:"CONTACT US",subtitle:"Dedicated Support for Parents and Students"},{title:"FIND US",subtitle:"Visit our Campus in the Heart of Mbale"},{title:"ADMISSIONS OFFICE",subtitle:"Get Detailed Enrollment Information"},{title:"GENERAL ENQUIRIES",subtitle:"We're Just a Message Away"},{title:"SCHOOL HOTLINE",subtitle:"Immediate Assistance for Parents"},{title:"VISITORS WELCOME",subtitle:"Discover Bugisu High School Today"},{title:"CONNECT WITH US",subtitle:"Stay Updated on Enrollment and Events"}],"/vacancies":[{title:"CAREERS AT BUGISU",subtitle:"Join a Team of Dedicated Educators"},{title:"SHAPE THE FUTURE",subtitle:"Professional Growth and Impact"},{title:"TEACH WITH US",subtitle:"Inspiring the Next Generation"},{title:"STAFF VACANCIES",subtitle:"Opportunities for Excellence"},{title:"JOIN OUR TEAM",subtitle:"Building a Brighter Future Together"},{title:"EDUCATIONAL LEADERS",subtitle:"Seeking Passionate Teachers"},{title:"CAREER GROWTH",subtitle:"Professional Development at Bugisu"},{title:"WORK WITH PURPOSE",subtitle:"Making a Difference in Students' Lives"},{title:"JOIN OUR FACULTY",subtitle:"A Community of Lifelong Learners"},{title:"VACANCIES 2026",subtitle:"New Opportunities for the Academic Year"}],"/gallery":[{title:"SCHOOL MEMORIES",subtitle:"Capturing Moments of Joy and Learning"},{title:"CAMPUS LIFE",subtitle:"A Glimpse into our Dynamic Environment"},{title:"EVENTS IN PICTURES",subtitle:"Celebrating our Achievements and Growth"},{title:"SPORTS HIGHLIGHTS",subtitle:"Excellence on and off the Field"},{title:"CREATIVE ARTS",subtitle:"Showcasing Student Talent and Expression"},{title:"CAMPUS BEAUTY",subtitle:"Our State-of-the-Art Facilities"},{title:"STUDENT ACTIVITIES",subtitle:"Engagement Beyond the Classroom"},{title:"CELEBRATIONS",subtitle:"Marking Milestones and Successes"},{title:"GALLERY OVERVIEW",subtitle:"Experience the Spirit of Bugisu"},{title:"RECENT MOMENTS",subtitle:"Life at Bugisu High School in Pictures"}],"/news":[{title:"LATEST UPDATES",subtitle:"Stay Informed about School Life"},{title:"ANNOUNCEMENTS",subtitle:"Important Information for our Community"},{title:"BLOG & STORIES",subtitle:"Voices from Bugisu High School"},{title:"TERM HIGHLIGHTS",subtitle:"Reviewing our Recent Successes"},{title:"STUDENT NEWS",subtitle:"Celebrating Individual Achievements"},{title:"STAFF UPDATES",subtitle:"Professional News from our Faculty"},{title:"UPCOMING EVENTS",subtitle:"Don't Miss Out on What's Coming"},{title:"COMMUNITY NEWS",subtitle:"Strengthening our Local Ties"},{title:"PRESS RELEASES",subtitle:"Official Statements and News"},{title:"READ MORE",subtitle:"Dive Deeper into our Latest Stories"}]},[s,l]=useState(!1),[a,O]=useState("/"),[c,g]=useState({title:"",subtitle:"",sort_order:0}),[h,C]=useState(null),[d,y]=useState(null),[b,m]=useState(""),[H,M]=useState(""),D=Y(),{data:j=[],isLoading:oe,refetch:ae}=ie(a),_=W({mutationFn:async({imageUrl:e,videoUrl:S,newSlide:n,selectedPage:I})=>{const{error:u}=await supabase.from("hero_slides").insert([{image_url:e,video_url:S,title:n.title||"Welcome",subtitle:n.subtitle||"Experience Excellence",page_path:I,sort_order:parseInt(n.sort_order)||0}]);if(u)throw u},onSuccess:()=>{D.invalidateQueries(["hero-slides",a]),g({title:"",subtitle:"",sort_order:0}),C(null),y(null),m(""),M(""),alert("Slide added successfully to "+a)},onError:e=>{console.error("Error uploading slide:",e),alert("Upload failed: "+e.message)}}),z=W({mutationFn:async e=>{const S=u=>u.split("/storage/v1/object/public/images/")[1],n=[];if(e.image_url){const u=S(e.image_url);u&&n.push(u)}if(e.video_url){const u=S(e.video_url);u&&n.push(u)}n.length>0&&await supabase.storage.from("images").remove(n);const{error:I}=await supabase.from("hero_slides").delete().eq("id",e.id);if(I)throw I},onSuccess:()=>{D.invalidateQueries(["hero-slides",a]),alert("Slide deleted!")},onError:e=>{console.error("Delete failed:",e),alert("Delete failed. Check console.")}}),J=e=>{g({...c,title:e.title,subtitle:e.subtitle})},K=async()=>{if(!h&&!b){alert("Please select a professional asset or upload your own image!");return}l(!0);try{let e=b,S=H;if(h){const n=h.name.split(".").pop(),u=`hero-slides/${`${Math.random()}.${n}`}`,{error:N}=await supabase.storage.from("images").upload(u,h);if(N)throw N;e=supabase.storage.from("images").getPublicUrl(u).data.publicUrl}if(d){const n=d.name.split(".").pop(),u=`hero-videos/${`${Math.random()}.${n}`}`,{error:N}=await supabase.storage.from("images").upload(u,d);if(N)throw N;S=supabase.storage.from("images").getPublicUrl(u).data.publicUrl}_.mutate({imageUrl:e,videoUrl:S,newSlide:c,selectedPage:a})}catch(e){console.error("Error preparing upload:",e),alert("Upload failed: "+e.message)}finally{l(!1)}},$=e=>{window.confirm("Delete this slide?")&&z.mutate(e)};return i.jsxs("div",{className:"admin-page",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[i.jsxs("div",{children:[i.jsx("h1",{children:"Universal Hero Manager"}),i.jsx("p",{style:{color:"#6b7280"},children:"Manage background images and videos for all pages."})]}),i.jsxs("div",{style:{background:"#f3f4f6",padding:"0.5rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("label",{style:{fontWeight:"600"},children:"Select Page to Edit:"}),i.jsx("select",{value:a,onChange:e=>O(e.target.value),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #d1d5db",minWidth:"200px"},children:r.map(e=>i.jsx("option",{value:e.path,children:e.label},e.path))})]})]}),i.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[i.jsxs("h3",{style:{fontSize:"1.2rem",marginBottom:"1rem"},children:["Add New Slide to ",i.jsx("span",{style:{color:"#2563eb"},children:a})]}),i.jsxs("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"2fr 2fr 1fr"},children:[i.jsx("input",{type:"text",placeholder:"Small Green Title",value:c.title,onChange:e=>g({...c,title:e.target.value}),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px"}}),i.jsx("input",{type:"text",placeholder:"Big White Subtitle",value:c.subtitle,onChange:e=>g({...c,subtitle:e.target.value}),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px"}}),i.jsx("input",{type:"number",placeholder:"Sort Order",value:c.sort_order,onChange:e=>g({...c,sort_order:e.target.value}),style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px"}})]}),i.jsxs("div",{style:{marginTop:"1rem"},children:[i.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"600"},children:["✨ Smart Suggestions for ",a,":"]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:(B=t[a])==null?void 0:B.map((e,S)=>i.jsxs("button",{onClick:()=>J(e),style:{padding:"0.4rem 0.8rem",paddingRight:"1rem",borderRadius:"50px",border:"1px solid #e5e7eb",background:"#f9fafb",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"0.4rem"},onMouseOver:n=>{n.currentTarget.style.borderColor="#2563eb",n.currentTarget.style.color="#2563eb"},onMouseOut:n=>{n.currentTarget.style.borderColor="#e5e7eb",n.currentTarget.style.color="inherit"},children:[i.jsxs("span",{style:{fontWeight:"bold"},children:[e.title,":"]})," ",e.subtitle]},S))})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"1.5rem"},children:[i.jsxs("div",{style:{border:h?"2px solid #059669":"2px dashed #e5e7eb",padding:"1rem",borderRadius:"8px",textAlign:"center",background:h?"#ecfdf5":"transparent"},children:[i.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem",fontWeight:"bold",color:h?"#059669":"inherit"},children:h?"✓ My Custom Image":"1. Or Upload New Image"}),i.jsx("input",{type:"file",onChange:e=>{C(e.target.files[0]),m("")},accept:"image/*",id:"img-upload",style:{display:"none"}}),i.jsx("label",{htmlFor:"img-upload",style:{cursor:"pointer",color:"#6b7280",fontSize:"0.85rem"},children:h?`Selected: ${h.name}`:"Select Local File..."})]}),i.jsxs("div",{style:{border:d?"2px solid #2563eb":"2px dashed #e5e7eb",padding:"1rem",borderRadius:"8px",textAlign:"center",background:d?"#eff6ff":"transparent"},children:[i.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem",fontWeight:"bold",color:d?"#2563eb":"inherit"},children:d?"✓ My Custom Video":"2. Or Upload New Video"}),i.jsx("input",{type:"file",onChange:e=>{y(e.target.files[0]),M("")},accept:"video/*",id:"vid-upload",style:{display:"none"}}),i.jsx("label",{htmlFor:"vid-upload",style:{cursor:"pointer",color:"#6b7280",fontSize:"0.85rem"},children:d?`Selected: ${d.name}`:"Select Video Background..."})]})]}),i.jsxs("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:[i.jsx("button",{className:"btn btn-primary btn-lg",onClick:K,disabled:s||!h&&!b,style:{padding:"0.75rem 2rem"},children:s?"Processing...":"Publish to "+a}),(h||b||d||H)&&i.jsx("button",{onClick:()=>{C(null),m(""),y(null),M("")},style:{marginLeft:"1rem",background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.85rem"},children:"Reset Selection"})]})]}),i.jsxs("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:["Active Slides for ",a," (",j.length,")"]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem"},children:[j.length===0&&i.jsx("p",{style:{gridColumn:"1/-1",textAlign:"center",padding:"3rem",color:"#6b7280",background:"#f9fafb",borderRadius:"8px"},children:"No hero content for this page yet."}),j.map(e=>i.jsxs("div",{style:{background:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",position:"relative"},children:[i.jsx("img",{src:e.image_url,alt:"Slide",style:{width:"100%",height:"150px",objectFit:"cover"}}),i.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",display:"flex",gap:"5px"},children:[i.jsxs("div",{style:{background:"rgba(0,0,0,0.7)",color:"white",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem"},children:["Ord: ",e.sort_order]}),e.video_url&&i.jsxs("div",{style:{background:"#2563eb",color:"white",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(re,{size:12})," VIDEO"]})]}),i.jsxs("div",{style:{padding:"1rem"},children:[i.jsx("p",{style:{color:"green",fontWeight:"bold",fontSize:"0.8rem",marginBottom:"0.25rem"},children:e.title}),i.jsx("p",{style:{fontWeight:"600",fontSize:"0.95rem"},children:e.subtitle})]}),i.jsx("button",{onClick:()=>$(e),style:{position:"absolute",top:"10px",right:"10px",background:"white",border:"none",borderRadius:"50%",padding:"0.5rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:i.jsx(se,{size:16,color:"red"})})]},e.id))]})]})};export{he as default};
