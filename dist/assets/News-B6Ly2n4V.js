import{c as f,r as i,b as g,j as e}from"./index-EH-KDdP-.js";import{u as w}from"./useQueries-CzAEryra.js";import{N as x}from"./NewsCard-Btd3uezx.js";import{S as j}from"./SEO-DtVSemPV.js";import{C as v}from"./Skeleton-B1hPQr4o.js";import{U as N}from"./UniversalHero-BnkIybS5.js";import"./OptimizedImage-CWDuI0t_.js";import"./chevron-left-GT57DOTz.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=f("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),y=(n,s=80)=>{const[c,l]=i.useState(0),[r,t]=i.useState(0),[o,h]=i.useState(!1),u=i.useCallback(a=>{window.scrollY===0&&l(a.touches[0].pageY)},[]),p=i.useCallback(a=>{if(c>0&&window.scrollY===0){const m=a.touches[0].pageY-c;m>0&&(t(Math.min(m*.5,s+20)),m>s&&a.cancelable&&a.preventDefault())}},[c,s]),d=i.useCallback(async()=>{if(r>s){h(!0),t(s);try{await n()}finally{setTimeout(()=>{h(!1),t(0)},500)}}else t(0);l(0)},[r,s,n]);return{pullDistance:r,isRefreshing:o,handleTouchStart:u,handleTouchMove:p,handleTouchEnd:d}},D=()=>{const{school:n}=g(),{data:s,isLoading:c,error:l,refetch:r}=w(n==null?void 0:n.id),{pullDistance:t,isRefreshing:o,handleTouchStart:h,handleTouchMove:u,handleTouchEnd:p}=y(r);return e.jsxs("div",{className:"section container news-page",onTouchStart:h,onTouchMove:u,onTouchEnd:p,children:[e.jsx(j,{title:"News & Announcements",description:"Stay updated with the latest news, announcements, and stories from Bugisu High School.",url:"/news"}),e.jsx("div",{className:`ptr-indicator ${o?"refreshing":""}`,style:{height:`${t}px`,opacity:t/40},children:e.jsx(S,{size:24,className:o?"spin":""})}),e.jsx(N,{pagePath:"/news",height:"35vh",showImage:!1,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h1",{children:"News & Announcements"}),e.jsx("p",{className:"page-subtitle",children:"Stay updated with the latest happenings at Bugisu High School."})]})}),c&&!o?e.jsx("div",{className:"news-grid",children:e.jsx(v,{count:6})}):l?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:"Failed to load news. Please try again later."})}):(s==null?void 0:s.length)===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No news updates at the moment. Please check back later."})}):e.jsx("div",{className:"news-grid",children:s.map((d,a)=>e.jsx(x,{news:d,index:a},d.id))})]})};export{D as default};
