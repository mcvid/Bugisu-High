import{r,s as n,j as e,M as j}from"./index-EH-KDdP-.js";import{S as y}from"./settings-BeqjjyAI.js";import{M as v}from"./mail-kSsI-FuV.js";import{C}from"./check-circle-DoFw_Y84.js";import{T as N}from"./trash-2-DWd29h3p.js";import{S}from"./save-1PpxZ3Wg.js";const B=()=>{const[d,c]=r.useState("settings"),[a,t]=r.useState({}),[l,x]=r.useState([]),[g,m]=r.useState(!0);r.useEffect(()=>{o()},[]);const o=async()=>{m(!0);const[s,i]=await Promise.all([n.from("contact_settings").select("*").single(),n.from("contact_messages").select("*").order("created_at",{ascending:!1})]);s.data&&t(s.data),x(i.data||[]),m(!1)},u=async()=>{const{error:s}=await n.from("contact_settings").update(a).eq("id",a.id);alert(s?"Error saving settings: "+s.message:"Contact settings updated successfully")},h=async(s,i)=>{const{error:p}=await n.from("contact_messages").update({status:i}).eq("id",s);p?alert(p.message):o()},b=async s=>{if(!window.confirm("Are you sure you want to delete this message?"))return;const{error:i}=await n.from("contact_messages").delete().eq("id",s);i?alert(i.message):o()},f=()=>e.jsxs("div",{className:"admin-form-card",style:{background:"white",padding:"2rem",borderRadius:"12px",border:"1px solid #eee"},children:[e.jsx("h3",{style:{marginBottom:"1.5rem"},children:"School Contact Information"}),e.jsxs("div",{className:"form-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[e.jsxs("div",{className:"form-group",style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Physical Address"}),e.jsx("textarea",{value:a.address||"",onChange:s=>t({...a,address:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Phone Number"}),e.jsx("input",{type:"text",value:a.phone_main||"",onChange:s=>t({...a,phone_main:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Admissions Phone"}),e.jsx("input",{type:"text",value:a.phone_admissions||"",onChange:s=>t({...a,phone_admissions:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"General Email"}),e.jsx("input",{type:"email",value:a.email_general||"",onChange:s=>t({...a,email_general:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Admissions Email"}),e.jsx("input",{type:"email",value:a.email_admissions||"",onChange:s=>t({...a,email_admissions:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Office Hours"}),e.jsx("input",{type:"text",value:a.office_hours||"",onChange:s=>t({...a,office_hours:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Google Maps Embed URL (Iframe src)"}),e.jsx("input",{type:"text",value:a.map_embed_url||"",onChange:s=>t({...a,map_embed_url:s.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]})]}),e.jsxs("button",{className:"btn btn-primary",onClick:u,style:{marginTop:"2rem"},children:[e.jsx(S,{size:18})," Save Contact Details"]})]});return e.jsxs("div",{className:"admin-manager contact-manager",children:[e.jsx("div",{className:"admin-header",style:{marginBottom:"2rem"},children:e.jsx("h1",{children:"Contact & Inquiries"})}),e.jsxs("div",{className:"admin-tabs",style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("button",{className:`btn ${d==="settings"?"btn-primary":"btn-outline"}`,onClick:()=>c("settings"),children:[e.jsx(y,{size:18})," Settings"]}),e.jsxs("button",{className:`btn ${d==="inbox"?"btn-primary":"btn-outline"}`,onClick:()=>c("inbox"),children:[e.jsx(j,{size:18})," Inbox (",l.filter(s=>s.status==="Unread").length,")"]})]}),g?e.jsx("p",{children:"Loading..."}):e.jsxs("div",{className:"admin-content",children:[d==="settings"&&f(),d==="inbox"&&e.jsx("div",{className:"admin-list",children:l.length===0?e.jsx("p",{children:"No messages yet."}):l.map(s=>e.jsxs("div",{className:"admin-list-item",style:{background:"white",padding:"1.5rem",borderRadius:"12px",border:"1px solid #eee",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsx("h3",{style:{margin:0},children:s.name}),e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 10px",borderRadius:"100px",background:s.status==="Unread"?"#fff1f2":"#f0f9ff",color:s.status==="Unread"?"#e11d48":"#0369a1",border:`1px solid ${s.status==="Unread"?"#fecdd3":"#bae6fd"}`},children:s.status})]}),e.jsxs("p",{style:{margin:0,color:"#64748b",fontSize:"0.9rem"},children:[e.jsx(v,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}})," ",s.email]})]}),e.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:"0.8rem"},children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("strong",{style:{display:"block",marginBottom:"0.5rem"},children:["Subject: ",s.subject]}),e.jsx("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"12px",color:"#334155"},children:s.message})]}),e.jsxs("div",{className:"actions",style:{display:"flex",gap:"1rem"},children:[s.status==="Unread"&&e.jsxs("button",{className:"btn btn-outline",onClick:()=>h(s.id,"Read"),children:[e.jsx(C,{size:18})," Mark Read"]}),e.jsx("button",{className:"btn btn-icon delete",onClick:()=>b(s.id),children:e.jsx(N,{size:18})})]})]},s.id))})]})]})};export{B as default};
