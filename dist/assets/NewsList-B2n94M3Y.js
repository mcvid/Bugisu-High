import{r as n,s as l,j as e,L as d,a5 as j}from"./index-DqW8wV2_.js";import{P as p}from"./pen-square-CvPFNc_S.js";import{T as f}from"./trash-2-C5gPLAv6.js";const g=()=>{const[r,a]=n.useState([]),[o,i]=n.useState(!0);n.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const{data:s,error:t}=await l.from("news").select("*").order("created_at",{ascending:!1});if(t)throw t;a(s||[])}catch(s){console.error("Error loading news:",s)}finally{i(!1)}},h=async s=>{if(window.confirm("Are you sure you want to delete this news item?"))try{const{error:t}=await l.from("news").delete().eq("id",s);if(t)throw t;a(r.filter(x=>x.id!==s))}catch(t){console.error("Error deleting news:",t),alert("Failed to delete news item.")}};return e.jsxs("div",{className:"admin-page admin-fade-in",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Manage News"}),e.jsxs(d,{to:"/admin/news/new",className:"btn btn-primary",children:[e.jsx(j,{size:18})," Create New"]})]}),e.jsx("div",{className:"admin-table-wrapper",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"Loading..."})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:"No news items found."})}):r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"500"},children:s.title}),e.jsx("td",{style:{color:"#6b7280",fontSize:"0.9rem"},children:new Date(s.published_at||s.created_at).toLocaleDateString()}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.is_published?"published":"Draft"}`,children:s.is_published?"Published":"Draft"})}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[e.jsx(d,{to:`/admin/news/edit/${s.id}`,className:"btn-icon",style:{padding:"6px",color:"#4b5563"},children:e.jsx(p,{size:18})}),e.jsx("button",{onClick:()=>h(s.id),className:"btn-icon",style:{padding:"6px",color:"#ef4444",background:"none",border:"none",cursor:"pointer"},children:e.jsx(f,{size:18})})]})})]},s.id))})]})})]})};export{g as default};
