import{r as s,s as y,j as e,C as b,A as a,I as u}from"./index-BwtYp3Ig.js";import{M as d}from"./megaphone-Bcz04vCF.js";import{U as j}from"./user-D7GJY-MG.js";import{f as c}from"./format-CPmVBsbA.js";const M=()=>{const[o,p]=s.useState([]),[g,l]=s.useState(!0),[r,n]=s.useState(null);s.useEffect(()=>{x()},[]);const x=async()=>{l(!0);const{data:t}=await y.from("announcements").select("*").eq("status","published").or("expires_at.is.null,expires_at.gt."+new Date().toISOString()).order("created_at",{ascending:!1});p(t||[]),l(!1)},m=t=>t==="urgent"?e.jsx(a,{size:20,color:"#ef4444"}):t==="high"?e.jsx(a,{size:20,color:"#f59e0b"}):e.jsx(u,{size:20,color:"#3b82f6"}),f=t=>{const i={low:{bg:"#f1f5f9",text:"#475569",border:"#cbd5e1"},normal:{bg:"#dbeafe",text:"#1e40af",border:"#93c5fd"},high:{bg:"#fef3c7",text:"#92400e",border:"#fbbf24"},urgent:{bg:"#fee2e2",text:"#991b1b",border:"#fca5a5"}};return i[t]||i.normal};return e.jsxs("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h1",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(d,{size:32,color:"var(--color-orange)"}),"School Announcements"]}),e.jsx("p",{style:{color:"#6b7280",marginTop:"0.5rem"},children:"Stay updated with the latest news and important information from Bugisu High School."})]}),g?e.jsx("p",{style:{textAlign:"center",padding:"3rem",color:"#94a3b8"},children:"Loading announcements..."}):o.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#94a3b8"},children:[e.jsx(d,{size:48,style:{opacity:.3,margin:"0 auto 1rem"}}),e.jsx("p",{children:"No announcements at this time."})]}):e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:o.map(t=>{const i=f(t.priority);return e.jsxs("div",{style:{background:"white",border:`2px solid ${i.border}`,borderRadius:"12px",overflow:"hidden",cursor:"pointer",transition:"all 0.2s",boxShadow:(r==null?void 0:r.id)===t.id?"0 4px 12px rgba(0,0,0,0.15)":"none"},onClick:()=>n(t),children:[e.jsx("div",{style:{background:i.bg,padding:"1rem 1.5rem",borderBottom:`1px solid ${i.border}`},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[m(t.priority),e.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:700,textTransform:"uppercase",color:i.text},children:[t.priority," Priority"]})]}),e.jsx("h2",{style:{margin:0,fontSize:"1.4rem",color:i.text},children:t.title})]})})}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("p",{style:{color:"#374151",lineHeight:1.7,margin:0,whiteSpace:(r==null?void 0:r.id)===t.id?"pre-wrap":"normal"},children:(r==null?void 0:r.id)===t.id?t.content:t.content.substring(0,200)+(t.content.length>200?"...":"")}),(r==null?void 0:r.id)!==t.id&&t.content.length>200&&e.jsx("button",{className:"btn btn-outline btn-sm",style:{marginTop:"1rem"},onClick:h=>{h.stopPropagation(),n(t)},children:"Read More"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb",fontSize:"0.85rem",color:"#6b7280"},children:[e.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[e.jsxs("span",{children:[e.jsx(b,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),c(new Date(t.created_at),"MMM dd, yyyy")]}),e.jsxs("span",{children:[e.jsx(j,{size:14,style:{verticalAlign:"middle",marginRight:"4px"}}),t.target_audience==="all"?"All Parents":t.target_audience]})]}),t.expires_at&&e.jsxs("span",{style:{fontSize:"0.75rem",fontStyle:"italic"},children:["Valid until ",c(new Date(t.expires_at),"MMM dd")]})]})]})]},t.id)})})]})};export{M as default};
