import{r as n,s as d,j as e,M as g,A as h,O as f,a3 as j}from"./index-DnZapYtk.js";import{C as y}from"./check-circle-DznmAU8U.js";const v=()=>{const[l,o]=n.useState([]),[m,r]=n.useState(!0),[a,t]=n.useState("all");n.useEffect(()=>{i()},[]);const i=async()=>{r(!0);const{data:s}=await d.from("feedback").select("*").order("created_at",{ascending:!1});s&&o(s),r(!1)},p=async(s,b)=>{const{error:u}=await d.from("feedback").update({status:b}).eq("id",s);u?alert("Error updating status"):i()},x=s=>{switch(s){case"general":return e.jsx(j,{size:18,color:"#3b82f6"});case"q_and_a":return e.jsx(f,{size:18,color:"#eab308"});case"complaint":return e.jsx(h,{size:18,color:"#ef4444"});default:return e.jsx(g,{size:18})}},c=a==="all"?l:l.filter(s=>s.type===a);return e.jsxs("div",{className:"admin-manager",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Feedback & Q&A"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:`btn ${a==="all"?"btn-primary":"btn-outline"}`,onClick:()=>t("all"),children:"All"}),e.jsx("button",{className:`btn ${a==="general"?"btn-primary":"btn-outline"}`,onClick:()=>t("general"),children:"Suggestions"}),e.jsx("button",{className:`btn ${a==="q_and_a"?"btn-primary":"btn-outline"}`,onClick:()=>t("q_and_a"),children:"Q&A"}),e.jsx("button",{className:`btn ${a==="complaint"?"btn-primary":"btn-outline"}`,onClick:()=>t("complaint"),children:"Issues"})]})]}),e.jsx("div",{className:"admin-content",children:m?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"admin-list",children:c.length===0?e.jsx("p",{className:"text-gray-500",children:"No items found."}):c.map(s=>e.jsx("div",{className:"admin-list-item",style:{background:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #eee",marginBottom:"1rem",borderLeft:`4px solid ${s.type==="complaint"?"#ef4444":s.type==="q_and_a"?"#eab308":"#3b82f6"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[x(s.type),e.jsx("span",{style:{textTransform:"uppercase",fontSize:"0.75rem",fontWeight:"bold",color:"#64748b",letterSpacing:"0.5px"},children:s.type.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),e.jsx("p",{style:{fontSize:"1.1rem",margin:"0.5rem 0 1rem",color:"#1e293b",lineHeight:"1.5"},children:s.message}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",fontSize:"0.9rem",color:"#64748b"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"From:"})," ",s.name||"Anonymous"]}),s.email&&e.jsxs("span",{children:[e.jsx("strong",{children:"Email:"})," ",s.email]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"0.5rem"},children:[e.jsx("div",{children:e.jsx("span",{className:`status-badge ${s.status==="new"?"pending":"accepted"}`,children:s.status})}),s.status==="new"&&e.jsxs("button",{className:"btn btn-outline btn-sm",onClick:()=>p(s.id,"reviewed"),children:[e.jsx(y,{size:16})," Mark Reviewed"]}),s.email&&e.jsx("a",{href:`mailto:${s.email}?subject=RE: Bugisu High School Feedback`,className:"btn btn-primary btn-sm",children:"Reply"})]})]})},s.id))})})]})};export{v as default};
