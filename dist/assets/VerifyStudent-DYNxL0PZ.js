import{d as x,r as i,j as e,L as u,s as h}from"./index-EH-KDdP-.js";import{S as g}from"./SEO-DtVSemPV.js";import{C as y}from"./check-circle-DoFw_Y84.js";import{X as b}from"./x-circle-Bij7XsNB.js";import{A as j}from"./arrow-left-BzqiXXya.js";const C=()=>{const{regNo:d}=x(),r=decodeURIComponent(d||""),[t,c]=i.useState(null),[m,l]=i.useState(!0),[f,o]=i.useState(null),[p,n]=i.useState(!1);return i.useEffect(()=>{(async()=>{if(!r){o("No Registration Number provided."),l(!1);return}try{const{data:s,error:a}=await h.from("students").select("*").eq("student_reg_number",r).single();if(a)throw a;c(s),new Date(s.valid_until||"2099-12-31")>=new Date?n(!0):(n(!1),o("Student ID has expired."))}catch(s){console.error("Verification error:",s),o("Student NOT FOUND in database."),n(!1)}finally{l(!1)}})()},[r]),e.jsxs("div",{style:{minHeight:"100vh",background:"#f8fafc",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[e.jsx(g,{title:"Verify Student ID",description:"Official Student Verification System"}),e.jsxs("div",{style:{background:"white",padding:"3rem 2rem",borderRadius:"16px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",maxWidth:"400px",width:"100%",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[m?e.jsx("div",{className:"spinner",style:{width:"50px",height:"50px",border:"5px solid #e2e8f0",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}):p?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#22c55e"},children:e.jsx(y,{size:80,fill:"#dcfce7"})}),e.jsx("h2",{style:{color:"#15803d",margin:0},children:"ACTIVE STUDENT"}),e.jsxs("div",{style:{width:"100%",marginTop:"1rem",borderTop:"1px solid #e2e8f0",paddingTop:"1.5rem"},children:[e.jsx("img",{src:t.photo_url||"https://via.placeholder.com/150",alt:"Student",style:{width:"120px",height:"140px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0",marginBottom:"1rem"}}),e.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#1e293b"},children:t.student_name}),e.jsx("p",{style:{margin:0,color:"#64748b",fontWeight:"600"},children:t.student_reg_number}),e.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#64748b"},children:[t.class_grade," | ",t.house]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#ef4444"},children:e.jsx(b,{size:80,fill:"#fee2e2"})}),e.jsx("h2",{style:{color:"#b91c1c",margin:0},children:"INVALID ID"}),e.jsx("p",{style:{color:"#ef4444",fontWeight:"500"},children:f}),r&&e.jsxs("p",{style:{fontSize:"0.9rem",color:"#94a3b8",background:"#f1f5f9",padding:"0.5rem",borderRadius:"4px"},children:["Scanned: ",r]})]}),e.jsxs(u,{to:"/",style:{marginTop:"2rem",color:"#64748b",textDecoration:"none",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.9rem"},children:[e.jsx(j,{size:16})," Back to Home"]})]}),e.jsx("p",{style:{marginTop:"2rem",color:"#94a3b8",fontSize:"0.8rem"},children:"Bugisu High School Digital Verification System"})]})};export{C as default};
