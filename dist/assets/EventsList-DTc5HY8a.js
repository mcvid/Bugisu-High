import{r,s as l,j as e,L as d,E as j}from"./index-EH-KDdP-.js";import{P as m}from"./pen-square-BENuWFf8.js";import{T as f}from"./trash-2-DWd29h3p.js";const u=()=>{const[n,i]=r.useState([]),[o,a]=r.useState(!0);r.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0);const{data:t,error:s}=await l.from("events").select("*").order("event_date",{ascending:!1});if(s)throw s;i(t||[])}catch(t){console.error("Error loading events:",t)}finally{a(!1)}},h=async t=>{if(window.confirm("Are you sure you want to delete this event?"))try{const{error:s}=await l.from("events").delete().eq("id",t);if(s)throw s;i(n.filter(x=>x.id!==t))}catch(s){console.error("Error deleting event:",s),alert("Failed to delete event.")}};return e.jsxs("div",{className:"admin-page admin-fade-in",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Manage Events"}),e.jsxs(d,{to:"/admin/events/new",className:"btn btn-primary",children:[e.jsx(j,{size:18})," Add Event"]})]}),e.jsx("div",{className:"admin-table-wrapper",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Event Title"}),e.jsx("th",{children:"Date & Time"}),e.jsx("th",{children:"Location"}),e.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center"},children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",style:{padding:"2rem",textAlign:"center"},children:"No events found."})}):n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"500"},children:t.title}),e.jsx("td",{style:{color:"#6b7280",fontSize:"0.9rem"},children:new Date(t.event_date).toLocaleString()}),e.jsx("td",{style:{color:"#6b7280"},children:t.location}),e.jsx("td",{style:{textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.5rem"},children:[e.jsx(d,{to:`/admin/events/edit/${t.id}`,className:"btn-icon",style:{padding:"6px",color:"#4b5563"},children:e.jsx(m,{size:18})}),e.jsx("button",{onClick:()=>h(t.id),className:"btn-icon",style:{padding:"6px",color:"#ef4444",background:"none",border:"none",cursor:"pointer"},children:e.jsx(f,{size:18})})]})})]},t.id))})]})})]})};export{u as default};
