import{r,j as e,U as g,s as d,a as _,a5 as v,X as C}from"./index-DqW8wV2_.js";import{S as y}from"./shield-BoWKMa-X.js";import{T as w}from"./trophy-BVnNSnDC.js";import{P as S}from"./pen-square-CvPFNc_S.js";import{T as N}from"./trash-2-C5gPLAv6.js";const O=()=>{const[c,u]=r.useState("teams"),[m,n]=r.useState(!1);return e.jsxs("div",{className:"admin-page",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Sports & Co-curricular Manager"}),e.jsx("p",{children:"Manage teams, match schedules, and student clubs."})]}),e.jsxs("div",{className:"admin-tabs",children:[e.jsxs("button",{className:`tab-btn ${c==="teams"?"active":""}`,onClick:()=>u("teams"),children:[e.jsx(y,{size:18})," Teams & Rosters"]}),e.jsxs("button",{className:`tab-btn ${c==="matches"?"active":""}`,onClick:()=>u("matches"),children:[e.jsx(w,{size:18})," Matches & Results"]}),e.jsxs("button",{className:`tab-btn ${c==="clubs"?"active":""}`,onClick:()=>u("clubs"),children:[e.jsx(g,{size:18})," Clubs & Societies"]})]}),e.jsxs("div",{className:"admin-content-wrapper",children:[c==="teams"&&e.jsx(T,{}),c==="matches"&&e.jsx(D,{}),c==="clubs"&&e.jsx(k,{})]})]})},T=()=>{const[c,u]=r.useState([]),[m,n]=r.useState(null),[i,l]=r.useState(!1),[o,h]=r.useState(!0),[a,t]=r.useState({name:"",sport:"",coach_name:"",description:""});r.useEffect(()=>{j()},[]);const j=async()=>{h(!0);const{data:s}=await d.from("sports_teams").select("*").order("name");s&&u(s),h(!1)},b=async s=>{s.preventDefault();try{m?await d.from("sports_teams").update(a).eq("id",m.id):await d.from("sports_teams").insert([a]),l(!1),n(null),t({name:"",sport:"",coach_name:"",description:""}),j()}catch(x){console.error("Error saving team:",x),alert("Failed to save team")}},f=async s=>{window.confirm("Delete this team and all its members?")&&(await d.from("sports_teams").delete().eq("id",s),j())};return m&&!i?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>n(null),className:"btn btn-outline",style:{marginBottom:"1rem"},children:[e.jsx(_,{size:16,style:{transform:"rotate(180deg)"}})," Back to Teams"]}),e.jsxs("div",{className:"admin-card",children:[e.jsx("div",{className:"flex-between",children:e.jsxs("h2",{children:[m.name," - Roster"]})}),e.jsx(M,{teamId:m.id})]})]}):e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"flex-between",style:{marginBottom:"1rem"},children:[e.jsx("h3",{children:"Sports Teams"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{n(null),t({name:"",sport:"",coach_name:"",description:""}),l(!0)},children:[e.jsx(v,{size:16})," Add Team"]})]}),i&&e.jsxs("div",{className:"admin-card form-card",children:[e.jsx("h4",{children:m?"Edit Team Details":"Add New Team"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Team Name"}),e.jsx("input",{value:a.name,onChange:s=>t({...a,name:s.target.value}),placeholder:"e.g. Senior Football Team",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sport"}),e.jsxs("select",{value:a.sport,onChange:s=>t({...a,sport:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Sport"}),e.jsx("option",{value:"Football",children:"Football"}),e.jsx("option",{value:"Netball",children:"Netball"}),e.jsx("option",{value:"Volleyball",children:"Volleyball"}),e.jsx("option",{value:"Basketball",children:"Basketball"}),e.jsx("option",{value:"Athletics",children:"Athletics"}),e.jsx("option",{value:"Rugby",children:"Rugby"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Coach Name"}),e.jsx("input",{value:a.coach_name,onChange:s=>t({...a,coach_name:s.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:a.description,onChange:s=>t({...a,description:s.target.value}),rows:3})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Team"})]})]})]}),e.jsx("div",{className:"teams-grid",children:c.map(s=>e.jsxs("div",{className:"admin-card team-card",children:[e.jsxs("div",{className:"team-header",children:[e.jsx(y,{size:24,className:"team-icon"}),e.jsxs("div",{children:[e.jsx("h4",{children:s.name}),e.jsx("span",{className:"badge",children:s.sport})]})]}),e.jsxs("div",{className:"team-actions",children:[e.jsxs("button",{className:"btn btn-sm btn-outline",onClick:()=>{n(s),t(s),l(!0)},children:[e.jsx(S,{size:14})," Edit Info"]}),e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{n(s),l(!1)},children:[e.jsx(g,{size:14})," Manage Roster"]}),e.jsx("button",{className:"btn-icon delete",onClick:()=>f(s.id),children:e.jsx(N,{size:16})})]})]},s.id))})]})},M=({teamId:c})=>{const[u,m]=r.useState([]),[n,i]=r.useState({name:"",position:"",jersey_number:""});r.useEffect(()=>{l()},[c]);const l=async()=>{const{data:a}=await d.from("team_members").select("*").eq("team_id",c);a&&m(a)},o=async a=>{a.preventDefault(),await d.from("team_members").insert([{...n,team_id:c}]),i({name:"",position:"",jersey_number:""}),l()},h=async a=>{await d.from("team_members").delete().eq("id",a),l()};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:o,className:"member-form inline-form",children:[e.jsx("input",{placeholder:"Player Name",value:n.name,onChange:a=>i({...n,name:a.target.value}),required:!0}),e.jsx("input",{placeholder:"Position",value:n.position,onChange:a=>i({...n,position:a.target.value})}),e.jsx("input",{placeholder:"Jersey No.",value:n.jersey_number,onChange:a=>i({...n,jersey_number:a.target.value}),style:{width:"100px"}}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx(v,{size:16})," Add"]})]}),e.jsxs("table",{className:"admin-table",style:{marginTop:"1rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Position"}),e.jsx("th",{children:"Jersey"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:u.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.position}),e.jsx("td",{children:a.jersey_number}),e.jsx("td",{children:e.jsx("button",{className:"btn-icon delete",onClick:()=>h(a.id),children:e.jsx(C,{size:16})})})]},a.id))})]})]})},D=()=>{const[c,u]=r.useState([]),[m,n]=r.useState([]),[i,l]=r.useState(!1),[o,h]=r.useState({team_id:"",opponent:"",match_date:"",location:"",status:"scheduled"});r.useEffect(()=>{a(),t()},[]);const a=async()=>{const{data:s}=await d.from("matches").select("*, sports_teams(name)").order("match_date",{ascending:!1});s&&u(s)},t=async()=>{const{data:s}=await d.from("sports_teams").select("id, name");s&&n(s)},j=async s=>{s.preventDefault(),await d.from("matches").insert([o]),l(!1),h({team_id:"",opponent:"",match_date:"",location:"",status:"scheduled"}),a()},b=async(s,x,p)=>{await d.from("matches").update({home_score:x,away_score:p,status:"completed"}).eq("id",s),a()},f=async s=>{window.confirm("Delete match?")&&(await d.from("matches").delete().eq("id",s),a())};return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"flex-between",style:{marginBottom:"1rem"},children:[e.jsx("h3",{children:"Match Schedule"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>l(!0),children:[e.jsx(v,{size:16})," Add Match"]})]}),i&&e.jsxs("div",{className:"admin-card form-card",children:[e.jsx("h4",{children:"Add New Match"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Our Team"}),e.jsxs("select",{value:o.team_id,onChange:s=>h({...o,team_id:s.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Team"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Opponent"}),e.jsx("input",{value:o.opponent,onChange:s=>h({...o,opponent:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date & Time"}),e.jsx("input",{type:"datetime-local",value:o.match_date,onChange:s=>h({...o,match_date:s.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Location"}),e.jsx("input",{value:o.location,onChange:s=>h({...o,location:s.target.value})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Schedule Match"})]})]})]}),e.jsx("div",{className:"matches-list",children:c.map(s=>{var x;return e.jsxs("div",{className:"admin-card match-card",children:[e.jsxs("div",{className:"match-info",children:[e.jsx("span",{className:`status-badge ${s.status}`,children:s.status}),e.jsxs("div",{className:"teams-vs",children:[e.jsx("strong",{children:((x=s.sports_teams)==null?void 0:x.name)||"Unknown Team"}),e.jsx("span",{className:"vs",children:"VS"}),e.jsx("strong",{children:s.opponent})]}),e.jsxs("div",{className:"match-meta",children:[e.jsx("span",{children:new Date(s.match_date).toLocaleString()}),e.jsx("span",{children:s.location})]})]}),e.jsxs("div",{className:"match-scores",children:[e.jsxs("div",{className:"score-inputs",children:[e.jsx("input",{type:"number",placeholder:"Home",defaultValue:s.home_score,onBlur:p=>b(s.id,p.target.value,s.away_score)}),e.jsx("span",{children:"-"}),e.jsx("input",{type:"number",placeholder:"Away",defaultValue:s.away_score,onBlur:p=>b(s.id,s.home_score,p.target.value)})]}),e.jsx("button",{className:"btn-icon delete",onClick:()=>f(s.id),children:e.jsx(N,{size:16})})]})]},s.id)})})]})},k=()=>{const[c,u]=r.useState([]),[m,n]=r.useState(!1),[i,l]=r.useState({name:"",description:"",meeting_day:"",patron_name:""});r.useEffect(()=>{o()},[]);const o=async()=>{const{data:t}=await d.from("clubs").select("*").order("name");t&&u(t)},h=async t=>{t.preventDefault(),await d.from("clubs").insert([i]),n(!1),l({name:"",description:"",meeting_day:"",patron_name:""}),o()},a=async t=>{window.confirm("Delete club?")&&(await d.from("clubs").delete().eq("id",t),o())};return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"flex-between",style:{marginBottom:"1rem"},children:[e.jsx("h3",{children:"Clubs & Societies"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[e.jsx(v,{size:16})," Add Club"]})]}),m&&e.jsxs("div",{className:"admin-card form-card",children:[e.jsx("h4",{children:"Add New Club"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Club Name"}),e.jsx("input",{value:i.name,onChange:t=>l({...i,name:t.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:i.description,onChange:t=>l({...i,description:t.target.value}),rows:2})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Meeting Day/Time"}),e.jsx("input",{value:i.meeting_day,onChange:t=>l({...i,meeting_day:t.target.value}),placeholder:"e.g. Wednesdays 4PM"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Patron"}),e.jsx("input",{value:i.patron_name,onChange:t=>l({...i,patron_name:t.target.value})})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Club"})]})]})]}),e.jsx("div",{className:"clubs-list",children:c.map(t=>e.jsxs("div",{className:"admin-card club-item",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h4",{children:t.name}),e.jsxs("p",{style:{margin:"0.25rem 0",color:"#64748b",fontSize:"0.9rem"},children:[t.meeting_day," â€¢ Patron: ",t.patron_name]})]}),e.jsx("button",{className:"btn-icon delete",onClick:()=>a(t.id),children:e.jsx(N,{size:16})})]},t.id))})]})};export{O as default};
