import{c as f,r as c,b as g,j as e}from"./index-BwtYp3Ig.js";import{u as w}from"./useQueries-BG_ckdWW.js";import{N as x}from"./NewsCard-BkH6ArZs.js";import{S as j}from"./SEO-R--Uy0Ut.js";import{C as v}from"./Skeleton-DOQGQCKY.js";import{U as y}from"./UniversalHero-CjYEDUY6.js";import"./OptimizedImage-5pKiP7HU.js";import"./chevron-left-CZWBpdEq.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=f("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),S=(n,s=80)=>{const[i,l]=c.useState(0),[r,t]=c.useState(0),[o,h]=c.useState(!1),u=c.useCallback(a=>{window.scrollY===0&&l(a.touches[0].pageY)},[]),p=c.useCallback(a=>{if(i>0&&window.scrollY===0){const m=a.touches[0].pageY-i;m>0&&(t(Math.min(m*.5,s+20)),m>s&&a.cancelable&&a.preventDefault())}},[i,s]),d=c.useCallback(async()=>{if(r>s){h(!0),t(s);try{await n()}finally{setTimeout(()=>{h(!1),t(0)},500)}}else t(0);l(0)},[r,s,n]);return{pullDistance:r,isRefreshing:o,handleTouchStart:u,handleTouchMove:p,handleTouchEnd:d}},D=()=>{const{school:n}=g(),{data:s,isLoading:i,error:l,refetch:r}=w(n==null?void 0:n.id),{pullDistance:t,isRefreshing:o,handleTouchStart:h,handleTouchMove:u,handleTouchEnd:p}=S(r);return e.jsxs("div",{className:"section container news-page",onTouchStart:h,onTouchMove:u,onTouchEnd:p,children:[e.jsx(j,{title:"News & Announcements",description:"Stay updated with the latest news, announcements, and stories from Bugisu High School.",url:"/news"}),e.jsx("div",{className:`ptr-indicator ${o?"refreshing":""}`,style:{height:`${t}px`,opacity:t/40},children:e.jsx(N,{size:24,className:o?"spin":""})}),e.jsx(y,{pagePath:"/news",height:"40vh",children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h1",{style:{color:"white"},children:"News & Announcements"}),e.jsx("p",{className:"page-subtitle",style:{color:"rgba(255,255,255,0.9)"},children:"Stay updated with the latest happenings at Bugisu High School."})]})}),i&&!o?e.jsx("div",{className:"news-grid",children:e.jsx(v,{count:6})}):l?e.jsx("div",{className:"error-state",children:e.jsx("p",{children:"Failed to load news. Please try again later."})}):(s==null?void 0:s.length)===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No news updates at the moment. Please check back later."})}):e.jsx("div",{className:"news-grid",children:s.map((d,a)=>e.jsx(x,{news:d,index:a},d.id))})]})};export{D as default};
